2025-07-25 23:17:03,042 - INFO - Workflow initialized with parameters: {'substrate': 'd:\\WebAPP\\user_uploads\\results\\86ba04a8-4c09-4694-87e4-6bad59d2f23e\\100-1.cif', 'adsorbate': 'd:\\WebAPP\\user_uploads\\results\\86ba04a8-4c09-4694-87e4-6bad59d2f23e\\U.cif', 'output_folder': 'd:\\WebAPP\\user_uploads\\results\\86ba04a8-4c09-4694-87e4-6bad59d2f23e', 'adsorption_height': 2.0, 'vacuum_thickness': 20.0, 'surface_search_depth': 2.0, 'hollow_sites_enabled': True, 'on_top_sites_enabled': True, 'on_top_target_atom': 'O', 'surface_axis': 0, 'collision_threshold': 0.5, 'knn_neighbors': 2, 'hollow_site_deduplication_distance': 1.5, 'place_on_bottom': True, 'rotation_count': 50, 'rotation_step': 30, 'rotation_method': False}
2025-07-25 23:17:03,042 - INFO - 加载结构文件...
2025-07-25 23:17:04,011 - INFO - 加载成功: 基板=C160H200N112Zn28 | 吸附物=O2U
2025-07-25 23:17:04,011 - INFO - 构建表面平板模型...
2025-07-25 23:17:04,011 - INFO - 平板构建完成。PBC: [False  True  True] | 晶胞尺寸: [50.7586 33.695  33.695 ]
2025-07-25 23:17:05,205 - INFO - 基底能量: -2917.7656 eV
2025-07-25 23:17:05,229 - INFO - 吸附物能量: -25.9394 eV
2025-07-25 23:17:05,229 - INFO - 寻找底层(坐标最小侧)原子...
2025-07-25 23:17:05,229 - INFO - 找到 18 个底层(坐标最小侧)原子。
2025-07-25 23:17:05,233 - INFO - -> 计算“空腔”位点...
2025-07-25 23:17:05,234 - INFO - --> 去重后得到 8 个空腔位点。
2025-07-25 23:17:05,234 - INFO - -> 计算“顶”位点 on 'O'...
2025-07-25 23:17:05,234 - INFO - --> 找到了 0 个 'O' 顶位点。
2025-07-25 23:17:05,235 - INFO - 空穴hollow点有[{'site': array([20.3891 ,  8.42375, 16.8475 ]), 'normal': array([-1.79165885e-16,  3.93536234e-01, -9.19309106e-01]), 'type': 'Hollow'}, {'site': array([20.3891    , 11.51077358,  2.52880975]), 'normal': array([-0.45235577, -0.6306244 ,  0.6306244 ]), 'type': 'Hollow'}, {'site': array([20.3891 , 16.8475 ,  8.42375]), 'normal': array([-1.79165885e-16, -9.19309106e-01,  3.93536234e-01]), 'type': 'Hollow'}, {'site': array([20.3891 , 25.27125, 16.8475 ]), 'normal': array([-1.19443923e-15,  3.93536234e-01, -9.19309106e-01]), 'type': 'Hollow'}, {'site': array([20.3891    , 22.74244025,  2.52880975]), 'normal': array([-0.74206957, -0.34585196, -0.57421178]), 'type': 'Hollow'}, {'site': array([20.3891    , 13.76047642, 28.35827358]), 'normal': array([-0.80385244, -0.3069009 , -0.50954204]), 'type': 'Hollow'}, {'site': array([20.3891 , 16.8475 , 25.27125]), 'normal': array([-1.19443923e-15, -9.19309106e-01,  3.93536234e-01]), 'type': 'Hollow'}, {'site': array([20.3891    , 19.37630975, 28.35827358]), 'normal': array([-0.45235577,  0.6306244 , -0.6306244 ]), 'type': 'Hollow'}]
2025-07-25 23:17:05,235 - INFO - 顶位on_top点有[]
2025-07-25 23:17:05,235 - INFO - 位点搜索完成：8 个空腔位, 0 个顶位, 总计 8 个。
2025-07-25 23:17:05,235 - INFO - 开始在 8 个位点上放置、旋转和筛选...
2025-07-25 23:17:05,282 - INFO - --- 正在处理位点 1/8 (Hollow) ---
2025-07-25 23:17:05,282 - INFO -     -> 目标位置: [20.3891      9.21082247 15.00888179] (法向: [-1.79165885e-16  3.93536234e-01 -9.19309106e-01], 吸附高度: 2.0 Å)
2025-07-25 23:17:05,283 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:07,092 - INFO -     -> 位点 1 优化完成。最优角度: 139.78°, 吸附能: 12.0549 eV。
2025-07-25 23:17:07,098 - INFO -     -> 已保存至 02_adsorbed_site_1_Hollow.cif
2025-07-25 23:17:07,098 - INFO - --- 正在处理位点 2/8 (Hollow) ---
2025-07-25 23:17:07,098 - INFO -     -> 目标位置: [19.48438846 10.24952479  3.79005854] (法向: [-0.45235577 -0.6306244   0.6306244 ], 吸附高度: 2.0 Å)
2025-07-25 23:17:07,099 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:08,740 - INFO -     -> 位点 2 优化完成。最优角度: 333.29°, 吸附能: -0.7942 eV。
2025-07-25 23:17:08,744 - INFO -     -> 已保存至 02_adsorbed_site_2_Hollow.cif
2025-07-25 23:17:08,744 - INFO - --- 正在处理位点 3/8 (Hollow) ---
2025-07-25 23:17:08,745 - INFO -     -> 目标位置: [20.3891     15.00888179  9.21082247] (法向: [-1.79165885e-16 -9.19309106e-01  3.93536234e-01], 吸附高度: 2.0 Å)
2025-07-25 23:17:08,745 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:10,450 - INFO -     -> 位点 3 优化完成。最优角度: 250.80°, 吸附能: 1.8359 eV。
2025-07-25 23:17:10,455 - INFO -     -> 已保存至 02_adsorbed_site_3_Hollow.cif
2025-07-25 23:17:10,455 - INFO - --- 正在处理位点 4/8 (Hollow) ---
2025-07-25 23:17:10,456 - INFO -     -> 目标位置: [20.3891     26.05832247 15.00888179] (法向: [-1.19443923e-15  3.93536234e-01 -9.19309106e-01], 吸附高度: 2.0 Å)
2025-07-25 23:17:10,456 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:12,048 - INFO -     -> 位点 4 优化完成。最优角度: 139.78°, 吸附能: 12.0547 eV。
2025-07-25 23:17:12,054 - INFO -     -> 已保存至 02_adsorbed_site_4_Hollow.cif
2025-07-25 23:17:12,054 - INFO - --- 正在处理位点 5/8 (Hollow) ---
2025-07-25 23:17:12,054 - INFO -     -> 目标位置: [18.90496085 22.05073633  1.38038619] (法向: [-0.74206957 -0.34585196 -0.57421178], 吸附高度: 2.0 Å)
2025-07-25 23:17:12,054 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:13,717 - INFO -     -> 位点 5 优化完成。最优角度: 170.91°, 吸附能: -1.8982 eV。
2025-07-25 23:17:13,722 - INFO -     -> 已保存至 02_adsorbed_site_5_Hollow.cif
2025-07-25 23:17:13,722 - INFO - --- 正在处理位点 6/8 (Hollow) ---
2025-07-25 23:17:13,723 - INFO -     -> 目标位置: [18.78139512 13.14667462 27.33918951] (法向: [-0.80385244 -0.3069009  -0.50954204], 吸附高度: 2.0 Å)
2025-07-25 23:17:13,723 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:15,314 - INFO -     -> 位点 6 优化完成。最优角度: 315.28°, 吸附能: -0.1294 eV。
2025-07-25 23:17:15,319 - INFO -     -> 已保存至 02_adsorbed_site_6_Hollow.cif
2025-07-25 23:17:15,320 - INFO - --- 正在处理位点 7/8 (Hollow) ---
2025-07-25 23:17:15,320 - INFO -     -> 目标位置: [20.3891     15.00888179 26.05832247] (法向: [-1.19443923e-15 -9.19309106e-01  3.93536234e-01], 吸附高度: 2.0 Å)
2025-07-25 23:17:15,321 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:17,135 - INFO -     -> 位点 7 优化完成。最优角度: 250.80°, 吸附能: 1.8357 eV。
2025-07-25 23:17:17,140 - INFO -     -> 已保存至 02_adsorbed_site_7_Hollow.cif
2025-07-25 23:17:17,140 - INFO - --- 正在处理位点 8/8 (Hollow) ---
2025-07-25 23:17:17,141 - INFO -     -> 目标位置: [19.48438846 20.63755854 27.09702479] (法向: [-0.45235577  0.6306244  -0.6306244 ], 吸附高度: 2.0 Å)
2025-07-25 23:17:17,141 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-07-25 23:17:18,745 - INFO -     -> 位点 8 优化完成。最优角度: 275.66°, 吸附能: -2.0544 eV。
2025-07-25 23:17:18,750 - INFO -     -> 已保存至 02_adsorbed_site_8_Hollow.cif
2025-07-25 23:17:18,750 - INFO - -------------------- 优化流程总结 --------------------
2025-07-25 23:17:18,750 - INFO - 总共尝试位点数: 8
2025-07-25 23:17:18,750 - INFO - 因碰撞而跳过数: 0
2025-07-25 23:17:18,750 - INFO - 最终成功生成数: 8
2025-07-25 23:17:18,752 - INFO - ----------------------------------------------------
2025-07-25 23:17:18,752 - INFO - 正在创建用于前端可视化的 'adsorption_sites.json'...
2025-07-25 23:17:18,752 - INFO - 成功将可视化数据写入到: d:\WebAPP\user_uploads\results\86ba04a8-4c09-4694-87e4-6bad59d2f23e\adsorption_sites.json
2025-07-25 23:17:18,752 - INFO - 生成包含所有*优化后*吸附物的最终可视化文件...
2025-07-25 23:17:18,753 - INFO - --- 最终优化构型汇总 (吸附能越负越稳定) ---
2025-07-25 23:17:18,753 - INFO -   位点 8 (Hollow): 吸附能 = -2.0544 eV. (可视化标记: Ar)
2025-07-25 23:17:18,753 - INFO -   位点 5 (Hollow): 吸附能 = -1.8982 eV. (可视化标记: He)
2025-07-25 23:17:18,753 - INFO -   位点 2 (Hollow): 吸附能 = -0.7942 eV. (可视化标记: Kr)
2025-07-25 23:17:18,753 - INFO -   位点 6 (Hollow): 吸附能 = -0.1294 eV. (可视化标记: Xe)
2025-07-25 23:17:18,753 - INFO -   位点 7 (Hollow): 吸附能 = 1.8357 eV. (可视化标记: Kr)
2025-07-25 23:17:18,754 - INFO -   位点 3 (Hollow): 吸附能 = 1.8359 eV. (可视化标记: Ar)
2025-07-25 23:17:18,754 - INFO -   位点 4 (Hollow): 吸附能 = 12.0547 eV. (可视化标记: Ne)
2025-07-25 23:17:18,754 - INFO -   位点 1 (Hollow): 吸附能 = 12.0549 eV. (可视化标记: Xe)
2025-07-25 23:17:18,761 - INFO - 包含所有最终构型的可视化文件已生成: 00_FINAL_all_optimized_sites.cif
2025-07-25 23:17:18,761 - INFO - Calculation finished successfully.
