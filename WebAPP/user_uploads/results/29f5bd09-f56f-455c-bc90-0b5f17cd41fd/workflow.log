2025-09-07 19:02:43,723 - INFO - Workflow initialized with parameters: {'substrate': 'd:\\WebAPP\\user_uploads\\results\\29f5bd09-f56f-455c-bc90-0b5f17cd41fd\\100-1.cif', 'adsorbate': 'd:\\WebAPP\\user_uploads\\results\\29f5bd09-f56f-455c-bc90-0b5f17cd41fd\\U.cif', 'output_folder': 'd:\\WebAPP\\user_uploads\\results\\29f5bd09-f56f-455c-bc90-0b5f17cd41fd', 'adsorption_height': 2.0, 'vacuum_thickness': 20.0, 'surface_search_depth': 2.0, 'hollow_sites_enabled': True, 'on_top_sites_enabled': True, 'on_top_target_atom': 'O', 'surface_axis': 2, 'collision_threshold': 1.2, 'knn_neighbors': 2, 'hollow_site_deduplication_distance': 1.5, 'place_on_bottom': False, 'rotation_count': 50, 'rotation_step': 30, 'rotation_method': False}
2025-09-07 19:02:43,724 - INFO - 加载结构文件...
2025-09-07 19:02:44,729 - INFO - 加载成功: 基板=C160H200N112Zn28 | 吸附物=O2U
2025-09-07 19:02:44,729 - INFO - 构建表面平板模型...
2025-09-07 19:02:44,730 - INFO - 平板构建完成。PBC: [ True  True False] | 晶胞尺寸: [45.       33.695    73.068273]
2025-09-07 19:02:46,363 - INFO - 基底能量: -2911.6777 eV
2025-09-07 19:02:46,390 - INFO - 吸附物能量: -25.9394 eV
2025-09-07 19:02:46,390 - INFO - 寻找顶层(坐标最大侧)原子...
2025-09-07 19:02:46,390 - INFO - 找到 32 个顶层(坐标最大侧)原子。
2025-09-07 19:02:46,396 - INFO - -> 计算“空腔”位点...
2025-09-07 19:02:46,402 - INFO - --> 去重后得到 12 个空腔位点。
2025-09-07 19:02:46,402 - INFO - -> 计算“顶”位点 on 'O'...
2025-09-07 19:02:46,402 - INFO - --> 找到了 0 个 'O' 顶位点。
2025-09-07 19:02:46,405 - INFO - 空穴hollow点有[{'site': array([14.5539    ,  6.678349  , 51.77932693]), 'normal': array([-0.13760588,  0.81341392,  0.56517468]), 'type': 'Hollow'}, {'site': array([13.00305   ,  7.5308325 , 52.33933783]), 'normal': array([ 0.4781282 , -0.19063507,  0.85735156]), 'type': 'Hollow'}, {'site': array([13.9077    , 10.17195892, 52.14615317]), 'normal': array([ 0.71410654, -0.0135547 ,  0.69990579]), 'type': 'Hollow'}, {'site': array([19.1412    , 10.169151  , 51.77932693]), 'normal': array([ 0.13760588, -0.81341392,  0.56517468]), 'type': 'Hollow'}, {'site': array([20.69205   ,  9.3166675 , 52.33933783]), 'normal': array([-0.4781282 ,  0.19063507,  0.85735156]), 'type': 'Hollow'}, {'site': array([19.7874    ,  6.67554108, 52.14615317]), 'normal': array([-0.71410654,  0.0135547 ,  0.69990579]), 'type': 'Hollow'}, {'site': array([14.5539    , 23.525849  , 51.77932693]), 'normal': array([-0.13760588,  0.81341392,  0.56517468]), 'type': 'Hollow'}, {'site': array([13.00305   , 24.3783325 , 52.33933783]), 'normal': array([ 0.4781282 , -0.19063507,  0.85735156]), 'type': 'Hollow'}, {'site': array([13.9077    , 27.01945892, 52.14615317]), 'normal': array([ 0.71410654, -0.0135547 ,  0.69990579]), 'type': 'Hollow'}, {'site': array([19.1412    , 27.016651  , 51.77932693]), 'normal': array([ 0.13760588, -0.81341392,  0.56517468]), 'type': 'Hollow'}, {'site': array([20.69205   , 26.1641675 , 52.33933783]), 'normal': array([-0.4781282 ,  0.19063507,  0.85735156]), 'type': 'Hollow'}, {'site': array([19.7874    , 23.52304108, 52.14615317]), 'normal': array([-0.71410654,  0.0135547 ,  0.69990579]), 'type': 'Hollow'}]
2025-09-07 19:02:46,405 - INFO - 顶位on_top点有[]
2025-09-07 19:02:46,405 - INFO - 位点搜索完成：12 个空腔位, 0 个顶位, 总计 12 个。
2025-09-07 19:02:46,405 - INFO - 开始在 12 个位点上放置、旋转和筛选...
2025-09-07 19:02:46,456 - INFO - --- 正在处理位点 1/12 (Hollow) ---
2025-09-07 19:02:46,456 - INFO -     -> 目标位置: [14.27868824  8.30517683 52.9096763 ] (法向: [-0.13760588  0.81341392  0.56517468], 吸附高度: 2.0 Å)
2025-09-07 19:02:46,456 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:46,971 - WARNING -     -> 位点 1 在最优旋转后仍发生碰撞 (最短距离: 1.11 Å)，跳过。
2025-09-07 19:02:46,971 - INFO - --- 正在处理位点 2/12 (Hollow) ---
2025-09-07 19:02:46,971 - INFO -     -> 目标位置: [13.9593064   7.14956235 54.05404095] (法向: [ 0.4781282  -0.19063507  0.85735156], 吸附高度: 2.0 Å)
2025-09-07 19:02:46,971 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:48,748 - INFO -     -> 位点 2 优化完成。最优角度: 166.87°, 吸附能: -3.8826 eV。
2025-09-07 19:02:48,748 - INFO -     -> 已保存至 02_adsorbed_site_2_Hollow.cif
2025-09-07 19:02:48,748 - INFO - --- 正在处理位点 3/12 (Hollow) ---
2025-09-07 19:02:48,748 - INFO -     -> 目标位置: [15.33591308 10.14484951 53.54596475] (法向: [ 0.71410654 -0.0135547   0.69990579], 吸附高度: 2.0 Å)
2025-09-07 19:02:48,756 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:50,970 - INFO -     -> 位点 3 优化完成。最优角度: 150.57°, 吸附能: 0.4062 eV。
2025-09-07 19:02:50,981 - INFO -     -> 已保存至 02_adsorbed_site_3_Hollow.cif
2025-09-07 19:02:50,981 - INFO - --- 正在处理位点 4/12 (Hollow) ---
2025-09-07 19:02:50,981 - INFO -     -> 目标位置: [19.41641176  8.54232317 52.9096763 ] (法向: [ 0.13760588 -0.81341392  0.56517468], 吸附高度: 2.0 Å)
2025-09-07 19:02:50,981 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:51,535 - WARNING -     -> 位点 4 在最优旋转后仍发生碰撞 (最短距离: 1.06 Å)，跳过。
2025-09-07 19:02:51,535 - INFO - --- 正在处理位点 5/12 (Hollow) ---
2025-09-07 19:02:51,535 - INFO -     -> 目标位置: [19.7357936   9.69793765 54.05404095] (法向: [-0.4781282   0.19063507  0.85735156], 吸附高度: 2.0 Å)
2025-09-07 19:02:51,535 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:52,011 - WARNING -     -> 位点 5 在最优旋转后仍发生碰撞 (最短距离: 1.12 Å)，跳过。
2025-09-07 19:02:52,011 - INFO - --- 正在处理位点 6/12 (Hollow) ---
2025-09-07 19:02:52,011 - INFO -     -> 目标位置: [18.35918692  6.70265049 53.54596475] (法向: [-0.71410654  0.0135547   0.69990579], 吸附高度: 2.0 Å)
2025-09-07 19:02:52,011 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:52,416 - WARNING -     -> 位点 6 在最优旋转后仍发生碰撞 (最短距离: 0.82 Å)，跳过。
2025-09-07 19:02:52,416 - INFO - --- 正在处理位点 7/12 (Hollow) ---
2025-09-07 19:02:52,416 - INFO -     -> 目标位置: [14.27868824 25.15267683 52.9096763 ] (法向: [-0.13760588  0.81341392  0.56517468], 吸附高度: 2.0 Å)
2025-09-07 19:02:52,416 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:52,776 - WARNING -     -> 位点 7 在最优旋转后仍发生碰撞 (最短距离: 1.11 Å)，跳过。
2025-09-07 19:02:52,776 - INFO - --- 正在处理位点 8/12 (Hollow) ---
2025-09-07 19:02:52,776 - INFO -     -> 目标位置: [13.9593064  23.99706235 54.05404095] (法向: [ 0.4781282  -0.19063507  0.85735156], 吸附高度: 2.0 Å)
2025-09-07 19:02:52,776 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:54,765 - INFO -     -> 位点 8 优化完成。最优角度: 166.87°, 吸附能: -3.8835 eV。
2025-09-07 19:02:54,771 - INFO -     -> 已保存至 02_adsorbed_site_8_Hollow.cif
2025-09-07 19:02:54,773 - INFO - --- 正在处理位点 9/12 (Hollow) ---
2025-09-07 19:02:54,773 - INFO -     -> 目标位置: [15.33591308 26.99234951 53.54596475] (法向: [ 0.71410654 -0.0135547   0.69990579], 吸附高度: 2.0 Å)
2025-09-07 19:02:54,773 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:56,728 - INFO -     -> 位点 9 优化完成。最优角度: 150.57°, 吸附能: 0.4062 eV。
2025-09-07 19:02:56,735 - INFO -     -> 已保存至 02_adsorbed_site_9_Hollow.cif
2025-09-07 19:02:56,736 - INFO - --- 正在处理位点 10/12 (Hollow) ---
2025-09-07 19:02:56,736 - INFO -     -> 目标位置: [19.41641176 25.38982317 52.9096763 ] (法向: [ 0.13760588 -0.81341392  0.56517468], 吸附高度: 2.0 Å)
2025-09-07 19:02:56,736 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:57,314 - WARNING -     -> 位点 10 在最优旋转后仍发生碰撞 (最短距离: 1.06 Å)，跳过。
2025-09-07 19:02:57,314 - INFO - --- 正在处理位点 11/12 (Hollow) ---
2025-09-07 19:02:57,314 - INFO -     -> 目标位置: [19.7357936  26.54543765 54.05404095] (法向: [-0.4781282   0.19063507  0.85735156], 吸附高度: 2.0 Å)
2025-09-07 19:02:57,314 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:57,798 - WARNING -     -> 位点 11 在最优旋转后仍发生碰撞 (最短距离: 1.12 Å)，跳过。
2025-09-07 19:02:57,798 - INFO - --- 正在处理位点 12/12 (Hollow) ---
2025-09-07 19:02:57,799 - INFO -     -> 目标位置: [18.35918692 23.55015049 53.54596475] (法向: [-0.71410654  0.0135547   0.69990579], 吸附高度: 2.0 Å)
2025-09-07 19:02:57,799 - INFO -     -> (使用LennardJones进行快速旋转优化...)
2025-09-07 19:02:58,335 - WARNING -     -> 位点 12 在最优旋转后仍发生碰撞 (最短距离: 0.82 Å)，跳过。
2025-09-07 19:02:58,336 - INFO - -------------------- 优化流程总结 --------------------
2025-09-07 19:02:58,336 - INFO - 总共尝试位点数: 12
2025-09-07 19:02:58,336 - INFO - 因碰撞而跳过数: 8
2025-09-07 19:02:58,336 - INFO - 最终成功生成数: 4
2025-09-07 19:02:58,336 - INFO - ----------------------------------------------------
2025-09-07 19:02:58,336 - INFO - 正在创建用于前端可视化的 'adsorption_sites.json'...
2025-09-07 19:02:58,339 - INFO - 成功将可视化数据写入到: d:\WebAPP\user_uploads\results\29f5bd09-f56f-455c-bc90-0b5f17cd41fd\adsorption_sites.json
2025-09-07 19:02:58,339 - INFO - 生成包含所有*优化后*吸附物的最终可视化文件...
2025-09-07 19:02:58,339 - INFO - --- 最终优化构型汇总 (吸附能越负越稳定) ---
2025-09-07 19:02:58,340 - INFO -   位点 8 (Hollow): 吸附能 = -3.8835 eV. (可视化标记: Ar)
2025-09-07 19:02:58,340 - INFO -   位点 2 (Hollow): 吸附能 = -3.8826 eV. (可视化标记: Kr)
2025-09-07 19:02:58,340 - INFO -   位点 3 (Hollow): 吸附能 = 0.4062 eV. (可视化标记: Ar)
2025-09-07 19:02:58,340 - INFO -   位点 9 (Hollow): 吸附能 = 0.4062 eV. (可视化标记: Ne)
2025-09-07 19:02:58,344 - INFO - 包含所有最终构型的可视化文件已生成: 00_FINAL_all_optimized_sites.cif
2025-09-07 19:02:58,344 - INFO - Calculation finished successfully.
